<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Produkte - Kauf24</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
    <nav class="navbar-sticky" style="background:#094372; color:#fff; padding:1rem 0; display:flex; align-items:center; justify-content:space-between;">
    <span id="site-logo" style="font-size:2rem; font-weight:bold; color:#fff; margin-left:2rem; margin-right:2rem; letter-spacing:1px; cursor:pointer;">Kauf24</span>
        <div class="navbar-dropdown" style="position:relative;">
            <button id="dropdown-btn" style="background:#0078d7; color:#ffffff; border:none; border-radius:4px; padding:0.5rem 1.2rem; font-size:1.4rem; cursor:pointer; display:flex; align-items:center; gap:0.5rem;">
                <i class="fa-solid fa-bars"></i>
                <span style="font-size:1rem; font-weight:bold;"></span>
            </button>
            <div id="dropdown-menu" style="position:fixed; left:0; top:64px; width:260px; height:calc(100vh - 64px); background:#fff; color:#222; box-shadow:0 2px 16px rgba(0,0,0,0.12); border-radius:0 12px 12px 0; z-index:1001; overflow-y:auto;">
                <a href="index.html" class="dropdown-anim-link" style="display:block; padding:0.7rem 1.2rem; text-decoration:none; color:#222; border-bottom:1px solid #eee;">Home</a>
                <a href="products.html" id="dropdown-products" class="dropdown-anim-link" style="display:flex; align-items:center; justify-content:space-between; padding:0.7rem 1.2rem; text-decoration:none; color:#222; border-bottom:1px solid #eee; cursor:pointer; position:relative; transition: background 0.2s, color 0.2s, transform 0.2s;">
                    <span style="display:flex; align-items:center;">
                        <i class="fa-solid fa-box-open" style="margin-right:8px;"></i> Produkte
                    </span>
                    <i class="fa-solid fa-chevron-right"></i>
                </a>
                <a href="#kontakt" class="dropdown-anim-link" style="display:block; padding:0.7rem 1.2rem; text-decoration:none; color:#222;">Kontakt</a>
            </div>
        </div>
        <form class="navbar-search" style="display:flex; justify-content:center; align-items:center; max-width:400px; margin:0 2rem; width:100%;">
            <input type="text" id="navbar-search-input" placeholder="Suche..." style="padding:0.5rem 1rem; border-radius:4px; border:1px solid #ccc; width:100%; min-width:180px;">
        </form>
        <div class="navbar-icons">
                <a href="#" id="cart-link" style="font-size:1.8rem; color:#ffffff; background:none; border:none; position:relative; margin-right:1.2rem;">
                        <i class="fa-solid fa-cart-shopping"></i>
                        <span id="cart-count" style="position:absolute; top:-8px; right:-8px; background:#d70022; color:#fff; border-radius:50%; padding:2px 7px; font-size:0.9rem; display:none;">0</span>
                </a>
                <a href="#" id="login-link" style="font-size:1.8rem; color:#ffffff; background:none; border:none; position:relative; margin-right:2rem;">
                        <i class="fa-solid fa-user"></i>
                </a>
        </div>
    </nav>

    <div id="cart-dropdown" style="display:none; position:fixed; right:2rem; top:64px; width:340px; max-height:60vh; background:#fff; color:#222; box-shadow:0 2px 16px rgba(0,0,0,0.12); border-radius:12px; z-index:2000; overflow-y:auto; padding:1rem;">
        <h3>Warenkorb</h3>
        <div id="cart-items"></div>
        <div id="cart-empty" style="color:#888;">Dein Warenkorb ist leer.</div>
        <div id="cart-total" style="margin-top:1rem; font-weight:bold; color:#0078d7;"></div>
        <button id="cart-checkout" style="margin-top:1rem; background:#0078d7; color:#fff; border:none; border-radius:4px; padding:0.5rem 1.2rem; font-size:1rem; cursor:pointer; width:100%;">Zur Kasse</button>
    </div>

    

    <main>
        <header class="products-header">
            <h1>Unsere Produkte</h1>
            <p>Finden Sie die besten Angebote für die neueste Technik.</p>
        </header>

        <div id="produkt-grid">
            <section id="handys" class="produkt-sektion">
                <h2>Handys</h2>
                <div class="produkt-grid">
                    <div class="produkt-card" data-category="handys" data-name="iPhone 15">
                        <img src="img/iphone-16-display.webp" alt="iPhone 15">
                        <h3>iPhone 15</h3>
                        <p>Apple iPhone 15 mit A17 Chip.</p>
                        <span class="preis">1099.99</span>
                        <button class="add-to-cart-btn">In den Warenkorb</button>
                        <button class="favorite-btn"><i class="far fa-heart"></i></button>
                    </div>
                    <div class="produkt-card" data-category="handys" data-name="Samsung Galaxy S23">
                        <img src="img/iphone-13-6655518.jpg" alt="Samsung Galaxy S23">
                        <h3>Samsung Galaxy S23</h3>
                        <p>Das neuste Samsung Flaggschiff.</p>
                        <span class="preis">949.99</span>
                        <button class="add-to-cart-btn">In den Warenkorb</button>
                        <button class="favorite-btn"><i class="far fa-heart"></i></button>
                    </div>
                    <div class="produkt-card" data-category="handys" data-name="Xiaomi 13">
                        <img src="img/iphone-12-5755365.jpg" alt="Xiaomi 13">
                        <h3>Xiaomi 13</h3>
                        <p>Flaggschiff mit Leica-Kamera.</p>
                        <span class="preis">749.99</span>
                        <button class="add-to-cart-btn">In den Warenkorb</button>
                        <button class="favorite-btn"><i class="far fa-heart"></i></button>
                    </div>
                </div>
            </section>

            <section id="tablets" class="produkt-sektion">
                <h2>Tablets</h2>
                <div class="produkt-grid">
                    <div class="produkt-card" data-category="tablets" data-name="iPad Pro">
                        <img src="img/iphone-16-display.webp" alt="iPad Pro">
                        <h3>iPad Pro</h3>
                        <p>Apple iPad Pro mit M2 Chip.</p>
                        <span class="preis">1299.99</span>
                        <button class="add-to-cart-btn">In den Warenkorb</button>
                        <button class="favorite-btn"><i class="far fa-heart"></i></button>
                    </div>
                    <div class="produkt-card" data-category="tablets" data-name="Samsung Galaxy Tab S9">
                        <img src="img/iphone-13-6655518.jpg" alt="Galaxy Tab S9">
                        <h3>Samsung Galaxy Tab S9</h3>
                        <p>Leistungsstarkes Android-Tablet.</p>
                        <span class="preis">999.99</span>
                        <button class="add-to-cart-btn">In den Warenkorb</button>
                        <button class="favorite-btn"><i class="far fa-heart"></i></button>
                    </div>
                </div>
            </section>

            <section id="smartwatch" class="produkt-sektion">
                <h2>Smartwatches</h2>
                <div class="produkt-grid">
                    <div class="produkt-card" data-category="smartwatch" data-name="Apple Watch Series 9">
                        <img src="img/applewatch.jpg" alt="Apple Watch Series 9">
                        <h3>Apple Watch Series 9</h3>
                        <p>Smartwatch mit Fitness-Tracking.</p>
                        <span class="preis">499.99</span>
                        <button class="add-to-cart-btn">In den Warenkorb</button>
                        <button class="favorite-btn"><i class="far fa-heart"></i></button>
                    </div>
                            <div class="produkt-card" data-category="smartwatch" data-name="Samsung Galaxy Watch 6">
                                <img src="img/samwatch4.jpg" alt="Samsung Galaxy Watch 6">
                        <h3>Samsung Galaxy Watch 6</h3>
                        <p>Elegante Smartwatch mit Gesundheitsfunktionen.</p>
                        <span class="preis">349.99</span>
                        <button class="add-to-cart-btn">In den Warenkorb</button>
                        <button class="favorite-btn"><i class="far fa-heart"></i></button>
                    </div>
                </div>
            </section>
            
            <section id="kopfhoerer" class="produkt-sektion">
                <h2>Kopfhörer</h2>
                <div class="produkt-grid">
                    <div class="produkt-card" data-category="kopfhoerer" data-name="Sony WH-1000XM5">
                        <img src="img/goobuds.png" alt="Sony WH-1000XM5">
                        <h3>Sony WH-1000XM5</h3>
                        <p>Branchenführendes Noise-Cancelling.</p>
                        <span class="preis">399.99</span>
                        <button class="add-to-cart-btn">In den Warenkorb</button>
                        <button class="favorite-btn"><i class="far fa-heart"></i></button>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 Kauf24. Alle Rechte vorbehalten.</p>
    </footer>

    <div id="login-modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.3); z-index:3000; justify-content:center; align-items:center;">
      <div style="background:#fff; padding:2rem 2.5rem; border-radius:12px; box-shadow:0 2px 16px rgba(0,0,0,0.15); min-width:320px; position:relative;">
        <button id="close-login-modal" style="position:absolute; top:12px; right:12px; background:none; border:none; font-size:1.3rem; color:#888; cursor:pointer;"><i class="fa-solid fa-xmark"></i></button>
        <h2 style="margin-top:0; color:#0078d7;">Anmelden</h2>
        <form id="login-form" style="display:flex; flex-direction:column; gap:1rem;">
          <input type="text" id="login-username" placeholder="Benutzername" style="padding:0.6rem; border-radius:4px; border:1px solid #ccc;">
          <input type="password" id="login-password" placeholder="Passwort" style="padding:0.6rem; border-radius:4px; border:1px solid #ccc;">
          <button type="submit" style="background:#0078d7; color:#fff; border:none; border-radius:4px; padding:0.7rem; font-size:1rem; cursor:pointer;">Login</button>
          <button type="button" id="register-btn" style="background:#eee; color:#0078d7; border:none; border-radius:4px; padding:0.7rem; font-size:1rem; cursor:pointer; margin-top:0.5rem;">Registrieren</button>
        </form>
      </div>
    </div>
    <div id="register-modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.3); z-index:3001; justify-content:center; align-items:center;">
      <div style="background:#fff; padding:2rem 2.5rem; border-radius:12px; box-shadow:0 2px 16px rgba(0,0,0,0.15); min-width:320px; position:relative;">
        <button id="close-register-modal" style="position:absolute; top:12px; right:12px; background:none; border:none; font-size:1.3rem; color:#888; cursor:pointer;"><i class="fa-solid fa-xmark"></i></button>
        <h2 style="margin-top:0; color:#0078d7;">Registrieren</h2>
        <form id="register-form" style="display:flex; flex-direction:column; gap:1rem;">
          <input type="text" id="register-username" placeholder="Benutzername" style="padding:0.6rem; border-radius:4px; border:1px solid #ccc;">
          <input type="email" id="register-email" placeholder="E-Mail" style="padding:0.6rem; border-radius:4px; border:1px solid #ccc;">
          <input type="password" id="register-password" placeholder="Passwort" style="padding:0.6rem; border-radius:4px; border:1px solid #ccc;">
          <button type="submit" style="background:#0078d7; color:#fff; border:none; border-radius:4px; padding:0.7rem; font-size:1rem; cursor:pointer;">Registrieren</button>
        </form>
      </div>
    </div>
    <div id="product-detail-modal"></div>

    <script src="main.js"></script>
        <script>
        (function(){
            const dropdownBtn = document.getElementById('dropdown-btn');
            const dropdownMenu = document.getElementById('dropdown-menu');
                    if (!dropdownBtn || !dropdownMenu) return;

                    // logo click -> go to startseite
                    const siteLogo = document.getElementById('site-logo');
                    if (siteLogo) {
                        siteLogo.addEventListener('click', function(e){
                            window.location.href = 'index.html';
                        });
                    }

            function openMenu() {
                dropdownMenu.classList.add('open');
                dropdownBtn.setAttribute('aria-expanded', 'true');
            }
            function closeMenu() {
                dropdownMenu.classList.remove('open');
                dropdownBtn.setAttribute('aria-expanded', 'false');
            }

            dropdownBtn.addEventListener('click', function(e){
                e.stopPropagation();
                if (dropdownMenu.classList.contains('open')) closeMenu(); else openMenu();
            });

            // click outside
            document.addEventListener('click', function(e){
                if (!dropdownMenu.classList.contains('open')) return;
                if (!dropdownMenu.contains(e.target) && e.target !== dropdownBtn && !dropdownBtn.contains(e.target)) closeMenu();
            });

            // esc key
            document.addEventListener('keydown', function(e){
                if (e.key === 'Escape' || e.key === 'Esc') {
                    if (dropdownMenu.classList.contains('open')) closeMenu();
                }
            });

            // prevent scroll behind when open on mobile
                const observer = new MutationObserver(() => {
                    if (dropdownMenu.classList.contains('open')) document.body.style.overflow = 'hidden'; else document.body.style.overflow = '';
                });
                observer.observe(dropdownMenu, { attributes: true, attributeFilter: ['class'] });

                // --- Warenkorb (Cart) Funktionen ---
                let cart = [];
                const cartDropdown = document.getElementById('cart-dropdown');
                const cartItemsDiv = document.getElementById('cart-items');
                const cartEmptyDiv = document.getElementById('cart-empty');

                function updateCartCount() {
                    const cartCount = document.getElementById('cart-count');
                    if (cartCount) {
                        cartCount.textContent = cart.length;
                        cartCount.style.display = cart.length > 0 ? 'inline-block' : 'none';
                    }
                }

                function addToCart(name, preis, bild) {
                    cart.push({ name, preis, bild });
                    updateCartCount();
                }

                function renderCart() {
                    if (!cartItemsDiv) return;
                    cartItemsDiv.innerHTML = '';
                    let total = 0;
                    if (cart.length === 0) {
                        cartEmptyDiv.style.display = 'block';
                        document.getElementById('cart-total').textContent = '';
                        return;
                    }
                    cartEmptyDiv.style.display = 'none';
                    cart.forEach(item => {
                        const div = document.createElement('div');
                        div.className = 'cart-item';
                        div.style.display = 'flex';
                        div.style.alignItems = 'center';
                        div.style.gap = '0.6rem';
                        div.style.marginBottom = '0.6rem';
                        div.innerHTML = `<img src="${item.bild}" alt="${item.name}" style="width:48px; height:48px; object-fit:cover; border-radius:6px;"><div style="flex:1"><div style="font-weight:600">${item.name}</div><div style="color:#666">${item.preis}</div></div><button class='remove-cart' style='background:#d70022; color:#fff; border:none; border-radius:6px; padding:0.4rem 0.6rem; cursor:pointer;'><i class='fa-solid fa-trash'></i></button>`;
                        cartItemsDiv.appendChild(div);
                        total += parseFloat(item.preis.replace(/[^\d,\.]/g, '').replace(',', '.')) || 0;
                        div.querySelector('.remove-cart').addEventListener('click', function() {
                            cart = cart.filter(p => !(p.name === item.name && p.preis === item.preis && p.bild === item.bild));
                            updateCartCount();
                            renderCart();
                        });
                    });
                    document.getElementById('cart-total').textContent = 'Gesamt: ' + total.toFixed(2) + ' €';
                }

                // Attach add-to-cart buttons
                document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        const card = btn.closest('.produkt-card');
                        const name = card.querySelector('h3')?.textContent || '';
                        const preis = card.querySelector('.preis')?.textContent || '';
                        const bild = card.querySelector('img')?.src || '';
                        addToCart(name, preis, bild);
                    });
                });

                // Cart dropdown toggle
                document.getElementById('cart-link')?.addEventListener('click', function(e) {
                    e.preventDefault();
                    if (!cartDropdown) return;
                    if (cartDropdown.style.display === 'block') {
                        cartDropdown.style.display = 'none';
                    } else {
                        renderCart();
                        cartDropdown.style.display = 'block';
                    }
                });

                window.addEventListener('click', function(e) {
                    if (cartDropdown && cartDropdown.style.display === 'block' && !cartDropdown.contains(e.target) && e.target.id !== 'cart-link' && !e.target.closest('#cart-link')) {
                        cartDropdown.style.display = 'none';
                    }
                });

                document.getElementById('cart-checkout')?.addEventListener('click', function() {
                    if (cart.length === 0) { alert('Dein Warenkorb ist leer.'); return; }
                    alert('Vielen Dank für deinen Einkauf! (Demo)');
                    cart = [];
                    updateCartCount();
                    renderCart();
                    cartDropdown.style.display = 'none';
                });
            })();
        </script>
</body>
</html>
